[{"C:\\Users\\purna\\week06\\personal-budget-final\\src\\index.js":"1","C:\\Users\\purna\\week06\\personal-budget-final\\src\\App.js":"2","C:\\Users\\purna\\week06\\personal-budget-final\\src\\reportWebVitals.js":"3","C:\\Users\\purna\\week06\\personal-budget-final\\src\\menu\\menu.js":"4","C:\\Users\\purna\\week06\\personal-budget-final\\src\\about\\about.js":"5","C:\\Users\\purna\\week06\\personal-budget-final\\src\\hero\\hero.js":"6","C:\\Users\\purna\\week06\\personal-budget-final\\src\\footer\\footer.js":"7","C:\\Users\\purna\\week06\\personal-budget-final\\src\\login\\login.js":"8","C:\\Users\\purna\\week06\\personal-budget-final\\src\\dashboard\\dashboard.js":"9","C:\\Users\\purna\\week06\\personal-budget-final\\src\\homepage\\homepage.js":"10","C:\\Users\\purna\\week06\\personal-budget-final\\src\\signup\\signup.js":"11","C:\\Users\\purna\\week06\\personal-budget-final\\src\\account\\account.js":"12"},{"size":536,"mtime":1697425998155,"results":"13","hashOfConfig":"14"},{"size":1201,"mtime":1702075863668,"results":"15","hashOfConfig":"14"},{"size":362,"mtime":1697419754011,"results":"16","hashOfConfig":"14"},{"size":639,"mtime":1697420690356,"results":"17","hashOfConfig":"14"},{"size":135,"mtime":1697420632806,"results":"18","hashOfConfig":"14"},{"size":223,"mtime":1697420656892,"results":"19","hashOfConfig":"14"},{"size":347,"mtime":1697420643380,"results":"20","hashOfConfig":"14"},{"size":2919,"mtime":1702245420124,"results":"21","hashOfConfig":"14"},{"size":12846,"mtime":1702302599431,"results":"22","hashOfConfig":"14"},{"size":1896,"mtime":1702302649207,"results":"23","hashOfConfig":"14"},{"size":4153,"mtime":1702302700331,"results":"24","hashOfConfig":"14"},{"size":1712,"mtime":1702300752255,"results":"25","hashOfConfig":"14"},{"filePath":"26","messages":"27","suppressedMessages":"28","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"jj70xo",{"filePath":"29","messages":"30","suppressedMessages":"31","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"32","messages":"33","suppressedMessages":"34","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"35","messages":"36","suppressedMessages":"37","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"38","messages":"39","suppressedMessages":"40","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"41","messages":"42","suppressedMessages":"43","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"44","messages":"45","suppressedMessages":"46","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"47","messages":"48","suppressedMessages":"49","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"50","messages":"51","suppressedMessages":"52","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"53"},{"filePath":"54","messages":"55","suppressedMessages":"56","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"57","messages":"58","suppressedMessages":"59","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"60","messages":"61","suppressedMessages":"62","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\purna\\week06\\personal-budget-final\\src\\index.js",[],[],"C:\\Users\\purna\\week06\\personal-budget-final\\src\\App.js",[],[],"C:\\Users\\purna\\week06\\personal-budget-final\\src\\reportWebVitals.js",[],[],"C:\\Users\\purna\\week06\\personal-budget-final\\src\\menu\\menu.js",[],[],"C:\\Users\\purna\\week06\\personal-budget-final\\src\\about\\about.js",[],[],"C:\\Users\\purna\\week06\\personal-budget-final\\src\\hero\\hero.js",[],[],"C:\\Users\\purna\\week06\\personal-budget-final\\src\\footer\\footer.js",[],[],"C:\\Users\\purna\\week06\\personal-budget-final\\src\\login\\login.js",[],[],"C:\\Users\\purna\\week06\\personal-budget-final\\src\\dashboard\\dashboard.js",["63","64","65"],[],"import React, { useRef, useState, useEffect } from 'react';\r\nimport Chart from 'chart.js/auto';\r\nimport { reactLocalStorage } from 'reactjs-localstorage';\r\nimport * as d3 from 'd3';\r\n\r\nconst BACKEND_URL = \"http://localhost:3031\";\r\n\r\nfunction Dashboard() {\r\n  const [budgetData, setBudgetData] = useState([]);\r\n  const [income, setIncome] = useState(0);\r\n  const [savings, setSavings] = useState(0);\r\n  const [title, setTitle] = useState('');\r\n  const [budget, setBudget] = useState('');\r\n  const [color, setColor] = useState('');\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  const barChartRef = useRef(null);\r\n\r\n  const pieChartRef = useRef(null);\r\n\r\n  let piechartInstance = null;\r\n  \r\n  let barChartInstance = null;\r\n\r\n\r\n  useEffect(() => {\r\n    const token = reactLocalStorage.get('jwt');\r\n\r\n    if (token) {\r\n      console.log(token);\r\n      getBudget(token);\r\n    } else {\r\n      handleError('Token not available.');\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    createPieChart(budgetData);\r\n    createBarChart(budgetData);\r\n    createDonutChart(budgetData);\r\n  \r\n    // Cleanup function to destroy chart instances\r\n    return () => {\r\n      if (piechartInstance) {\r\n        piechartInstance.destroy();\r\n        piechartInstance = null;\r\n      }\r\n      if (barChartInstance) {\r\n        barChartInstance.destroy();\r\n        barChartInstance = null;\r\n      }\r\n      // Add similar cleanup for donut chart if applicable\r\n    };\r\n  }, [budgetData, income, savings]); // Dependencies array, can be adjusted based on when you need to recreate the charts\r\n  \r\n  \r\n\r\n  const getBudget = async (token) => {\r\n    try {\r\n      const response = await fetch(`${BACKEND_URL}/api/get_budget`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': token,\r\n        },\r\n        body: JSON.stringify({ token }),\r\n      });\r\n\r\n      const data = await response.json();\r\n      if (data && data.ok === 1) {\r\n        setBudgetData(data.budgetData);\r\n        setIncome(data.income);\r\n        setSavings(data.savings);\r\n      } else {\r\n        handleError(data.message || \"Error in data response.\");\r\n      }\r\n    } catch (error) {\r\n      handleError(`Network Error: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const addToBudget = async () => {\r\n    const token = reactLocalStorage.get('jwt');\r\n    const requestBody = { title, budget, color };\r\n\r\n    try {\r\n      const response = await fetch(`${BACKEND_URL}/api/add_budget`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify(requestBody),\r\n      });\r\n\r\n      const data = await response.json();\r\n      if (data && data.ok === 1) {\r\n        setBudgetData(data.budgetData);\r\n      } else {\r\n        handleError(data.message || \"Error: Unknown error.\");\r\n      }\r\n    } catch (error) {\r\n      handleError(`Network Error: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const deleteFromBudget = async (titleToDelete) => {\r\n    const token = reactLocalStorage.get('jwt');\r\n\r\n    try {\r\n      const response = await fetch(`${BACKEND_URL}/api/delete_from_budget`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify({ title: titleToDelete }),\r\n      });\r\n\r\n      const data = await response.json();\r\n      if (data && data.ok === 1) {\r\n        setBudgetData(budgetData.filter(item => item.title !== titleToDelete));\r\n      } else {\r\n        handleError(data.message || \"Error: Unknown error while deleting.\");\r\n      }\r\n    } catch (error) {\r\n      handleError(`Network Error: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  const updateIncome = async () => {\r\n    const token = reactLocalStorage.get('jwt');\r\n    const requestBody = { token, income }; // Assuming 'income' is a state variable\r\n  \r\n    try {\r\n      const response = await fetch(`${BACKEND_URL}/api/update_income`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify(requestBody),\r\n      });\r\n  \r\n      const data = await response.json();\r\n      if (data && data.ok === 1) {\r\n        setIncome(data.income); // Update the 'income' state with the new value\r\n      } else {\r\n        handleError(data.error || \"Error: Unknown error.\");\r\n      }\r\n    } catch (error) {\r\n      handleError(`Network Error: ${error.message}`);\r\n    }\r\n  };\r\n  \r\n\r\n  const updateSavings = async () => {\r\n    const token = reactLocalStorage.get('jwt');\r\n    const requestBody = { token, savings }; // Assuming 'savings' is a state variable\r\n  \r\n    try {\r\n      const response = await fetch(`${BACKEND_URL}/api/update_savings`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify(requestBody),\r\n      });\r\n  \r\n      const data = await response.json();\r\n      if (data && data.ok === 1) {\r\n        setSavings(data.savings); // Update the 'savings' state with the new value\r\n      } else {\r\n        handleError(data.error || \"Error: Unknown error.\");\r\n      }\r\n    } catch (error) {\r\n      handleError(`Network Error: ${error.message}`);\r\n    }\r\n  };\r\n  \r\n\r\n  const createPieChart = (budgetData) => {\r\n    if (pieChartRef.current && !piechartInstance) {\r\n      const pieChartContext = pieChartRef.current.getContext('2d');\r\n  \r\n      piechartInstance = new Chart(pieChartContext, {\r\n        type: 'pie',\r\n        data: {\r\n          labels: budgetData.map(item => item.title),\r\n          datasets: [{\r\n            data: budgetData.map(item => item.budget),\r\n            backgroundColor: budgetData.map(item => item.color),\r\n          }],\r\n        },\r\n        options: {\r\n          responsive: true,\r\n          plugins: {\r\n            legend: {\r\n              position: 'bottom',\r\n            },\r\n            title: {\r\n              display: true,\r\n              text: 'Budget Distribution',\r\n            },\r\n          },\r\n        },\r\n      });\r\n    }\r\n  };\r\n  \r\n  \r\n  \r\n\r\n  const createDonutChart = (budgetData) => {\r\n    const width = 400;\r\n    const height = 400;\r\n    const radius = Math.min(width, height) / 2;\r\n\r\n    const svg = d3.select('#donutChart') // Select the SVG element with id 'donutChart'\r\n      .append('svg')\r\n      .attr('width', width)\r\n      .attr('height', height)\r\n      .append('g')\r\n      .attr('transform', `translate(${width / 2},${height / 2})`);\r\n\r\n    const colorScale = d3.scaleOrdinal()\r\n      .domain(budgetData.map((d) => d.title))\r\n      .range([\"#5a82ff\", \"#ff66b2\", \"#a1ff33\", \"#ff8c33\", \"#33ffb2\", \"#b233ff\", \"#ffd433\", \"#9FE2BF\"]);\r\n\r\n    const pie = d3.pie()\r\n      .value((d) => d.budget);\r\n\r\n    const arc = d3.arc()\r\n      .outerRadius(radius - 20)\r\n      .innerRadius(radius - 100);\r\n\r\n    const arcs = svg.selectAll('.arc')\r\n      .data(pie(budgetData))\r\n      .enter()\r\n      .append('g')\r\n      .attr('class', 'arc');\r\n\r\n    arcs.append('path')\r\n      .attr('d', arc)\r\n      .attr('fill', (d) => colorScale(d.data.title));\r\n\r\n    arcs.append('line')\r\n      .attr('x1', (d) => arc.centroid(d)[0])\r\n      .attr('y1', (d) => arc.centroid(d)[1])\r\n      .attr('x2', (d) => {\r\n        const pos = arc.centroid(d);\r\n        const midAngle = Math.atan2(pos[1], pos[0]);\r\n        return Math.cos(midAngle) * (radius + 10);\r\n      })\r\n      .attr('y2', (d) => {\r\n        const pos = arc.centroid(d);\r\n        const midAngle = Math.atan2(pos[1], pos[0]);\r\n        return Math.sin(midAngle) * (radius + 10);\r\n      })\r\n      .attr('stroke', 'blue');\r\n\r\n    arcs.append('text')\r\n      .attr('transform', (d) => {\r\n        const pos = arc.centroid(d);\r\n        const midAngle = Math.atan2(pos[1], pos[0]);\r\n        return `translate(${Math.cos(midAngle) * (radius + 20)},${Math.sin(midAngle) * (radius + 20)})`;\r\n      })\r\n      .attr('dy', '0.8em')\r\n      .style('text-anchor', (d) => {\r\n        const pos = arc.centroid(d);\r\n        return Math.cos(Math.atan2(pos[1], pos[0])) > 0 ? 'start' : 'end';\r\n      })\r\n      .text((d) => `${d.data.title} (${d.data.budget})`);\r\n  };\r\n\r\n /* eslint-disable no-undef */\r\n\r\n const createBarChart = (budgetData) => {\r\n  if (barChartRef.current && !barChartInstance) {\r\n    const barChartContext = barChartRef.current.getContext('2d');\r\n\r\n    barChartInstance = new Chart(barChartContext, {\r\n      type: 'bar',\r\n      data: {\r\n        labels: budgetData.map(item => item.title),\r\n        datasets: [{\r\n          label: 'Budget',\r\n          data: budgetData.map(item => item.budget),\r\n          backgroundColor: budgetData.map(item => item.color),\r\n          borderColor: budgetData.map(item => item.color),\r\n          borderWidth: 1,\r\n        }],\r\n      },\r\n      options: {\r\n        scales: {\r\n          y: {\r\n            beginAtZero: true,\r\n          },\r\n        },\r\n        responsive: true,\r\n        plugins: {\r\n          legend: {\r\n            display: false,\r\n          },\r\n          title: {\r\n            display: true,\r\n            text: 'Budget by Category',\r\n          },\r\n        },\r\n      },\r\n    });\r\n  }\r\n};\r\n\r\n\r\n\r\n  \r\n  const handleError = (message) => {\r\n    setErrorMessage(message);\r\n    setTimeout(() => {\r\n      setErrorMessage('');\r\n    }, 5000);\r\n  };\r\n\r\n  const handleInputChange = (event, setter) => {\r\n    setter(event.target.value);\r\n  };\r\n\r\n  return (\r\n    <main className=\"center\" id=\"main\">\r\n      <div id=\"dashboard\">\r\n        <h1>Budget Dashboard</h1>\r\n  \r\n        <div id=\"budgetTableHolder\">\r\n          {budgetData.length === 0 ? (\r\n            <p>You don't have any budget data yet! Get started by adding some budget data below.</p>\r\n          ) : (\r\n            <table id=\"budgetTable\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Title</th>\r\n                  <th>Budget</th>\r\n                  <th>Color</th>\r\n                  <th>Delete</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {budgetData.map((item, index) => (\r\n                  <tr key={index}>\r\n                    <td>{item.title}</td>\r\n                    <td>${item.budget}</td>\r\n                    <td>\r\n                      <div style={{ width: `${item.budget}%`, backgroundColor: item.color }}></div>\r\n                    </td>\r\n                    <td style={{ color: item.color }}>{item.color}</td>\r\n                    <td>\r\n                      <button onClick={() => deleteFromBudget(item.title)}>Delete</button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          )}\r\n        </div>\r\n  \r\n        <div>\r\n          <h2>Add to Budget</h2>\r\n          <div id=\"addToBudget\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Title\"\r\n              value={title}\r\n              onChange={(e) => handleInputChange(e, setTitle)}\r\n            />\r\n            <input\r\n              type=\"number\"\r\n              placeholder=\"Budget\"\r\n              value={budget}\r\n              onChange={(e) => handleInputChange(e, setBudget)}\r\n            />\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Color\"\r\n              value={color}\r\n              onChange={(e) => handleInputChange(e, setColor)}\r\n            />\r\n            <button onClick={addToBudget}>Add</button>\r\n          </div>\r\n        </div>\r\n  \r\n        <div>\r\n          <p id=\"errorMessage\">{errorMessage}</p>\r\n        </div>\r\n  \r\n        <div id=\"pieChartHolder\">\r\n          <h2>Pie Chart</h2>\r\n          <canvas id=\"pieChart\" ref={pieChartRef} width=\"200\" height=\"200\"></canvas>\r\n        </div>\r\n  \r\n        <div id=\"barChartHolder\">\r\n  <h2>Bar Chart</h2>\r\n  <canvas ref={barChartRef}></canvas>\r\n</div>\r\n\r\n  \r\n        <div id=\"donutChartHolder\">\r\n          <h2>Donut Chart</h2>\r\n          <div id=\"donutChart\"></div> {/* Create a div for the D3.js chart */}\r\n        </div>\r\n  \r\n        <div>\r\n  <h2>Budget Settings</h2>\r\n  <div id=\"budgetSettings\">\r\n    {/* Input field for updating savings */}\r\n    <input\r\n      type=\"number\"\r\n      placeholder=\"Savings\"\r\n      value={savings}\r\n      onChange={(e) => handleInputChange(e, setSavings)}\r\n    />\r\n    \r\n    {/* Button to trigger the savings update */}\r\n    <button onClick={updateSavings}>Update Savings</button>\r\n    {/* Input field for updating income */}\r\n    <input\r\n      type=\"number\"\r\n      placeholder=\"Income\"\r\n      value={income}\r\n      onChange={(e) => handleInputChange(e, setIncome)}\r\n    />\r\n    \r\n    {/* Button to trigger the income update */}\r\n    <button onClick={updateIncome}>Update Income</button>\r\n  \r\n  </div>\r\n</div>\r\n\r\n      </div>\r\n    </main>\r\n  );\r\n  \r\n}\r\n\r\nexport default Dashboard;\r\n","C:\\Users\\purna\\week06\\personal-budget-final\\src\\homepage\\homepage.js",[],[],"C:\\Users\\purna\\week06\\personal-budget-final\\src\\signup\\signup.js",[],[],"C:\\Users\\purna\\week06\\personal-budget-final\\src\\account\\account.js",[],[],{"ruleId":"66","severity":1,"message":"67","line":35,"column":6,"nodeType":"68","endLine":35,"endColumn":8,"suggestions":"69"},{"ruleId":"66","severity":1,"message":"70","line":46,"column":28,"nodeType":"71","endLine":46,"endColumn":32},{"ruleId":"66","severity":1,"message":"72","line":50,"column":28,"nodeType":"71","endLine":50,"endColumn":32},"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'getBudget'. Either include it or remove the dependency array.","ArrayExpression",["73"],"Assignments to the 'piechartInstance' variable from inside React Hook useEffect will be lost after each render. To preserve the value over time, store it in a useRef Hook and keep the mutable value in the '.current' property. Otherwise, you can move this variable directly inside useEffect.","Literal","Assignments to the 'barChartInstance' variable from inside React Hook useEffect will be lost after each render. To preserve the value over time, store it in a useRef Hook and keep the mutable value in the '.current' property. Otherwise, you can move this variable directly inside useEffect.",{"desc":"74","fix":"75"},"Update the dependencies array to be: [getBudget]",{"range":"76","text":"77"},[952,954],"[getBudget]"]